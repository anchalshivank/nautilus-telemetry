{
  "db_name": "PostgreSQL",
  "query": "\n        SELECT\n            COUNT(CASE WHEN metric_type = 'request_volume' THEN 1 END) as request_volume,\n            AVG(CASE WHEN metric_type = 'latency_validation' THEN metric_value END) as avg_validation,\n            AVG(CASE WHEN metric_type = 'latency_ingestion' THEN metric_value END) as avg_ingestion,\n            AVG(CASE WHEN metric_type = 'latency_total' THEN metric_value END) as avg_total,\n            PERCENTILE_CONT(0.95) WITHIN GROUP (ORDER BY metric_value)\n                FILTER (WHERE metric_type = 'latency_total') as p95_total,\n            PERCENTILE_CONT(0.99) WITHIN GROUP (ORDER BY metric_value)\n                FILTER (WHERE metric_type = 'latency_total') as p99_total\n        FROM server_metrics\n        WHERE ($1::text IS NULL OR vessel_id = $1)\n          AND timestamp > NOW() - INTERVAL '1 hour' * $2\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "request_volume",
        "type_info": "Int8"
      },
      {
        "ordinal": 1,
        "name": "avg_validation",
        "type_info": "Numeric"
      },
      {
        "ordinal": 2,
        "name": "avg_ingestion",
        "type_info": "Numeric"
      },
      {
        "ordinal": 3,
        "name": "avg_total",
        "type_info": "Numeric"
      },
      {
        "ordinal": 4,
        "name": "p95_total",
        "type_info": "Float8"
      },
      {
        "ordinal": 5,
        "name": "p99_total",
        "type_info": "Float8"
      }
    ],
    "parameters": {
      "Left": [
        "Text",
        "Float8"
      ]
    },
    "nullable": [
      null,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "4d34eca49bfd5950b5f081952f33ed9f9472204d7d28a1975d35009fe38b516d"
}
